{"version":3,"sources":["file:///Users/jordiawang/Developer/cocos-3.x-demo/assets/Script/WolfRun/UIController.ts"],"names":["_decorator","Component","Node","Label","Button","director","GlobalStore","WolfController","ccclass","property","UIController","onStartGame","data","gameStatus","setData","wolf","getComponent","reset","uiContainer","active","onGoHelloWorld","loadScene","onGameStatusChange","eventData","key","tips","string","score","position","z","toFixed","start","bindEvnet","node","on","EventType","TOUCH_START","goHelloWorldButton","onDestory","off","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,Q,OAAAA,Q;;AAC9CC,MAAAA,W;;AACEC,MAAAA,c,iBAAAA,c;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBT,U;;8BAGjBU,Y,WADZF,OAAO,CAAC,cAAD,C,UAELC,QAAQ,CAACP,IAAD,C,UAGRO,QAAQ,CAACL,MAAD,C,UAGRK,QAAQ,CAACP,IAAD,C,UAGRO,QAAQ,CAACN,KAAD,C,UAGRM,QAAQ,CAACN,KAAD,C,2BAdX,MACaO,YADb,SACkCT,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAoC1CU,WApC0C,GAoC5B,MAAM;AAClB,gBAAI;AAAA;AAAA,4CAAYC,IAAZ,CAAiBC,UAAjB,KAAgC,CAApC,EAAuC;AACrC;AAAA;AAAA,8CAAYC,OAAZ,CAAoB,YAApB,EAAkC,CAAlC;AACA,mBAAKC,IAAL,CAAUC,YAAV;AAAA;AAAA,oDAAuCC,KAAvC;AACA,mBAAKC,WAAL,CAAiBC,MAAjB,GAA0B,KAA1B;AACD;AACF,WA1CyC;;AAAA,eA4C1CC,cA5C0C,GA4CzB,MAAM;AACrBf,YAAAA,QAAQ,CAACgB,SAAT,CAAmB,YAAnB;AACD,WA9CyC;;AAAA,eAgD1CC,kBAhD0C,GAgDrBC,SAAS,IAAI;AAChC,gBAAIA,SAAS,CAACC,GAAV,KAAkB,YAAtB,EAAoC;AAClC,kBAAID,SAAS,CAACX,IAAV,KAAmB,CAAvB,EAA0B;AACxB,qBAAKa,IAAL,CAAUC,MAAV,GAAmB,cAAnB;AAEA,qBAAKC,KAAL,CAAWD,MAAX,GAAqB,OAAM,CAAC,KAAKX,IAAL,CAAUa,QAAV,CAAmBC,CAAnB,GAAuB,EAAxB,EAA4BC,OAA5B,CAAoC,CAApC,CAAuC,IAAlE;AAEA,qBAAKZ,WAAL,CAAiBC,MAAjB,GAA0B,IAA1B;AACD;AACF;AACF,WA1DyC;AAAA;;AAgB1CY,QAAAA,KAAK,GAAG;AACN,eAAKC,SAAL;AACD;;AAEDA,QAAAA,SAAS,GAAG;AACV,eAAKC,IAAL,CAAUC,EAAV,CAAahC,IAAI,CAACiC,SAAL,CAAeC,WAA5B,EAAyC,KAAKzB,WAA9C;AAEA,eAAK0B,kBAAL,CAAwBJ,IAAxB,CAA6BC,EAA7B,CAAgChC,IAAI,CAACiC,SAAL,CAAeC,WAA/C,EAA4D,KAAKhB,cAAjE;AAEA;AAAA;AAAA,0CAAYc,EAAZ,CAAe,YAAf,EAA6B,KAAKZ,kBAAlC;AACD;;AAEDgB,QAAAA,SAAS,GAAG;AACV,eAAKL,IAAL,CAAUM,GAAV,CAAcrC,IAAI,CAACiC,SAAL,CAAeC,WAA7B,EAA0C,KAAKzB,WAA/C;AAEA,eAAK0B,kBAAL,CAAwBJ,IAAxB,CAA6BM,GAA7B,CAAiCrC,IAAI,CAACiC,SAAL,CAAeC,WAAhD,EAA6D,KAAKhB,cAAlE;AAEA;AAAA;AAAA,0CAAYmB,GAAZ,CAAgB,YAAhB,EAA8B,KAAKjB,kBAAnC;AACD;;AA0BDkB,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAAE;;AA5Dc,O;;;;;iBAE7B,I;;;;;;;iBAGgB,I;;;;;;;iBAGT,I;;;;;;;iBAGN,I;;;;;;;iBAGC,I","sourcesContent":["import { _decorator, Component, Node, Label, Button, director } from 'cc';\nimport GlobalStore from './GlobalStore';\nimport { WolfController } from './WolfController';\nconst { ccclass, property } = _decorator;\n\n@ccclass('UIController')\nexport class UIController extends Component {\n  @property(Node)\n  wolf: Node = null;\n\n  @property(Button)\n  goHelloWorldButton: Button = null;\n\n  @property(Node)\n  uiContainer: Node = null;\n\n  @property(Label)\n  tips: Label = null;\n\n  @property(Label)\n  score: Label = null;\n\n  start() {\n    this.bindEvnet();\n  }\n\n  bindEvnet() {\n    this.node.on(Node.EventType.TOUCH_START, this.onStartGame);\n\n    this.goHelloWorldButton.node.on(Node.EventType.TOUCH_START, this.onGoHelloWorld);\n\n    GlobalStore.on('dataChange', this.onGameStatusChange);\n  }\n\n  onDestory() {\n    this.node.off(Node.EventType.TOUCH_START, this.onStartGame);\n\n    this.goHelloWorldButton.node.off(Node.EventType.TOUCH_START, this.onGoHelloWorld);\n\n    GlobalStore.off('dataChange', this.onGameStatusChange);\n  }\n\n  onStartGame = () => {\n    if (GlobalStore.data.gameStatus !== 1) {\n      GlobalStore.setData('gameStatus', 1);\n      this.wolf.getComponent(WolfController).reset();\n      this.uiContainer.active = false;\n    }\n  };\n\n  onGoHelloWorld = () => {\n    director.loadScene('HelloWorld');\n  };\n\n  onGameStatusChange = eventData => {\n    if (eventData.key === 'gameStatus') {\n      if (eventData.data === 2) {\n        this.tips.string = '游戏结束\\n点击重新开始';\n\n        this.score.string = `距离: ${(this.wolf.position.z + 19).toFixed(1)} 米`;\n\n        this.uiContainer.active = true;\n      }\n    }\n  };\n\n  update(deltaTime: number) {}\n}\n"]}